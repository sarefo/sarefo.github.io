// SVG-based Jugendstil floral ornaments using traced path data
class SvgFloralAnimator {
    constructor(themeHandler) {
        this.themeHandler = themeHandler;
        this.svg = null;
        this.paths = [];
        this.animationDuration = 3; // seconds
    }

    // Traced path data from reference ornament (ornament02.svg - cleaner version without bottom blobs)
    getTracedPath() {
        return `m 132.2909,164.87936 c -0.10814,-0.10815 -0.19663,-1.13561 -0.19663,-2.28325 0,-2.29955 -1.06492,-7.02507 -2.90948,-12.91064 -1.54186,-4.9197 -1.81446,-6.12149 -2.27926,-10.04829 -0.67125,-5.67109 -0.24232,-10.06177 1.60383,-16.41744 2.11319,-7.275 2.03163,-8.74115 -0.64113,-11.52455 -0.87803,-0.91438 -1.59642,-1.79191 -1.59642,-1.95007 0,-0.47119 1.46738,-0.32625 2.15243,0.21261 1.2011,0.94478 1.84073,2.70176 1.94385,5.33946 0.0518,1.32489 0.15276,2.46748 0.22437,2.53909 0.1077,0.1077 0.56878,-0.96572 0.49909,-1.16192 -0.012,-0.0337 0.10291,-0.45053 0.25528,-0.9263 0.64908,-2.02659 0.90171,-4.0752 0.69181,-5.61 -0.21257,-1.55437 -0.62397,-2.38748 -2.46928,-5.00043 -1.68915,-2.39185 -1.85688,-4.52867 -0.65098,-8.29326 0.8864,-2.767165 1.04973,-5.20887 0.40541,-6.060743 -0.53091,-0.701916 -0.49981,-0.885853 0.12226,-0.723178 1.37942,0.360725 2.91288,2.993059 2.91288,5.000231 0,1.012822 -0.55665,3.620379 -0.81346,3.810577 -0.0983,0.07278 -0.26262,0.519274 -0.36522,0.992206 -0.15574,0.717847 -0.11751,0.833387 0.23141,0.699497 0.22987,-0.0882 0.41795,-0.25285 0.41795,-0.36586 0,-0.11302 0.22491,-0.264294 0.4998,-0.336178 0.46569,-0.121782 0.45665,-0.03646 -0.13253,1.250478 -0.55764,1.21805 -0.61783,1.65967 -0.50956,3.73888 0.13892,2.66783 0.702,5.66056 1.08056,5.74312 0.13898,0.0303 0.59096,-1.55268 1.0044,-3.51776 0.6589,-3.13176 0.75693,-4.19371 0.79397,-8.601369 0.0381,-4.534516 -0.0176,-5.236479 -0.56701,-7.145749 -0.82284,-2.859412 -2.04952,-5.042182 -3.53366,-6.287841 -1.33198,-1.117948 -3.07825,-1.586571 -3.77069,-1.011893 -0.25722,0.213474 -0.43022,0.224216 -0.54777,0.03401 -0.19988,-0.323408 0.92173,-0.806328 1.87273,-0.806328 1.869,0 4.37166,2.510045 5.65479,5.671472 0.66553,1.639753 0.95684,1.709598 0.84653,0.202959 -0.36971,-5.049138 -2.55035,-9.113573 -5.82643,-10.859709 -2.1768,-1.16022 -4.00759,-1.08746 -4.99492,0.198511 -0.28329,0.368969 -0.32343,0.349488 -0.33083,-0.160552 -0.0276,-1.905528 4.35762,-1.829284 6.77748,0.117837 0.40667,0.32723 0.66201,0.594964 0.56741,0.594964 -0.0946,0 0.23562,0.432217 0.73384,0.960482 0.49822,0.528266 1.23457,1.480819 1.63634,2.116786 1.33675,2.115972 1.35866,1.637405 0.17523,-3.826075 -0.35721,-1.649118 -1.02205,-3.792842 -1.47742,-4.763833 -0.45537,-0.970991 -0.80937,-1.855342 -0.78666,-1.965224 0.0227,-0.109883 -0.7628,-1.012281 -1.74557,-2.005329 -1.46216,-1.477438 -2.02734,-1.865733 -3.11016,-2.136766 -0.72781,-0.182173 -1.97831,-0.574043 -2.7789,-0.870823 -4.78355,-1.77327 -5.28209,-1.829297 -6.32418,-0.710736 -0.64278,0.68994 -1.08623,0.448582 -1.08623,-0.591204 0,-0.942839 1.22651,-2.191043 2.59759,-2.643541 1.52491,-0.503267 3.99714,-0.186132 5.91704,0.75903 2.02748,0.998124 3.26679,2.285917 5.68668,5.90912 0.96657,1.44722 1.8069,2.581813 1.8674,2.521318 0.0605,-0.0605 -0.32457,-1.164144 -0.85569,-2.452553 -3.74976,-9.096217 -8.40333,-14.541312 -13.41562,-15.697494 -3.7885,-0.873889 -7.36905,0.253787 -9.06895,2.856214 -0.82571,1.264095 -0.79279,3.433799 0.066,4.347894 0.79674,0.848096 1.38313,2.380722 1.38313,3.615051 0,2.836868 1.00892,4.82958 2.64657,5.227208 0.99162,0.240768 1.11429,0.363159 0.77442,0.772672 -0.44107,0.531456 -2.87389,0.488762 -3.66348,-0.06429 -0.47661,-0.333831 -0.73446,-0.369312 -1.08644,-0.149496 -0.40175,0.250895 -0.48242,0.157461 -0.62298,-0.721522 -0.0888,-0.555357 -0.38688,-1.288118 -0.66239,-1.628358 -0.4295,-0.530414 -0.56185,-0.568051 -0.92824,-0.263973 -0.23503,0.195054 -0.42732,0.487832 -0.42732,0.650617 0,0.356907 -3.19016,3.418363 -3.37229,3.236236 -0.24599,-0.245987 -0.84372,-3.474767 -0.85293,-4.60732 -0.01,-1.231024 0.11261,-1.180885 -1.65106,-0.675057 -0.320728,0.09198 -0.746071,0.330177 -0.945209,0.529315 -0.515375,0.515376 -0.937729,0.447797 -0.787669,-0.126031 0.09556,-0.365429 -0.168645,-0.648118 -1.051252,-1.124794 -1.172219,-0.633089 -2.4552,-2.326357 -2.4552,-3.240355 0,-0.626645 0.400362,-0.543795 0.875361,0.181145 0.546949,0.83475 1.824031,1.330208 2.905678,1.127289 0.506269,-0.09498 1.545631,-0.735513 2.452491,-1.511425 1.72662,-1.477288 3.44229,-2.648561 3.99937,-2.730323 0.39221,-0.05756 2.18328,-1.885826 3.33331,-3.402533 2.2219,-2.930321 6.08353,-3.837638 10.25295,-2.409006 0.65503,0.224442 1.46306,0.472658 1.79562,0.551592 0.56712,0.134604 0.58502,0.100406 0.28834,-0.550736 -0.17397,-0.381838 -0.38774,-0.694252 -0.47503,-0.694252 -0.0873,0 -0.47817,-0.29621 -0.86861,-0.658245 -0.39044,-0.362035 -1.65861,-1.304256 -2.81817,-2.093825 -2.52405,-1.718686 -5.07076,-2.427435 -7.94355,-2.210692 -2.06375,0.155704 -4.63316,1.009107 -5.50545,1.828579 -0.75757,0.711705 -0.79923,1.694881 -0.0879,2.075554 0.7734,0.413914 0.64672,0.793972 -0.26466,0.793972 -0.70278,0 -0.79397,0.08968 -0.79397,0.780821 0,0.467039 0.18524,0.884485 0.46094,1.03878 0.58701,0.328506 0.27627,0.663968 -0.41253,0.445351 -0.70858,-0.224895 -1.20794,-1.540633 -1.02128,-2.690912 0.34547,-2.128862 2.93954,-3.991802 6.44667,-4.629702 1.04551,-0.190164 1.8529,-0.423475 1.79419,-0.518469 -0.12299,-0.198995 -2.60935,-0.69776 -4.35676,-0.873967 -1.13207,-0.114158 -6.286534,0.190573 -8.150979,0.481884 -5.201676,0.812738 -8.812923,3.410263 -9.448068,6.795877 -0.303945,1.620165 1.000811,3.961039 2.404117,4.313247 1.458149,0.365972 3.404533,-1.37898 2.926808,-2.623912 -0.185789,-0.484158 -1.131234,-0.53497 -1.319529,-0.07092 -0.102151,0.25175 -0.197894,0.239344 -0.400575,-0.0519 -0.390762,-0.561521 0.120956,-1.337548 0.881991,-1.337548 1.340547,0 1.961208,2.274846 0.92432,3.387815 -0.759526,0.815255 -1.94665,1.377004 -2.631325,1.245148 -1.903437,-0.366569 -3.448119,-2.179051 -3.448119,-4.045916 0,-3.765221 2.691466,-6.265219 8.336707,-7.743645 3.095379,-0.810644 10.363712,-1.029077 13.260802,-0.398522 3.55081,0.772838 5.78642,1.685176 8.22413,3.356205 0.60847,0.417103 1.22243,0.75837 1.36435,0.75837 0.15413,0 0.20166,-0.621798 0.11803,-1.544091 -0.16275,-1.794798 0.12864,-2.508138 1.26446,-3.09549 1.13751,-0.588229 1.43013,-0.227632 0.49851,0.614314 -0.67258,0.607845 -0.79741,0.921388 -0.81961,2.058763 -0.0262,1.343138 0.63876,3.301459 1.38859,4.089341 0.20488,0.215274 1.2505,1.435463 2.32361,2.71153 1.07311,1.276068 2.03892,2.374389 2.14623,2.440713 0.10732,0.06632 0.15326,-1.001065 0.1021,-2.371976 -0.0557,-1.493629 0.0139,-2.558664 0.17384,-2.657493 0.14677,-0.09071 0.21079,-0.255658 0.14225,-0.366552 -0.28083,-0.454398 1.61088,-2.766087 2.75846,-3.37085 1.4285,-0.752811 4.56683,-0.879909 5.81313,-0.235422 1.21072,0.626088 2.58688,2.436475 2.92571,3.84888 0.28004,1.167353 0.25093,1.394235 -0.3281,2.557069 -0.78415,1.574768 -2.02925,2.467013 -3.44263,2.467013 -1.91236,0 -3.3459,-1.42193 -2.83255,-2.809625 0.2598,-0.702306 0.74057,-0.889771 1.52973,-0.596474 0.83318,0.309655 0.51462,0.978792 -0.69003,1.449453 -0.26536,0.103676 0.34926,0.878912 0.89337,1.126826 1.16271,0.529764 2.32293,0.368934 3.08253,-0.427303 1.33022,-1.394374 1.60281,-3.115508 0.75616,-4.774376 -0.93166,-1.825412 -2.51319,-2.702195 -4.8742,-2.702195 -1.97252,0 -3.52365,0.857613 -4.5493,2.515288 -0.72673,1.174558 -0.79234,1.475402 -0.77469,3.552327 0.0234,2.757104 0.29118,3.603853 2.16684,6.852562 1.55879,2.69987 2.58855,4.818383 2.49974,5.142689 -0.0299,0.109171 0.0528,0.198493 0.18372,0.198493 0.13094,0 0.45221,0.595479 0.71392,1.323287 0.51353,1.42808 1.16526,1.773099 1.16526,0.616878 0,-0.747824 1.28004,-3.225788 2.06445,-3.996454 0.25637,-0.251876 0.92744,-0.67321 1.49126,-0.936299 0.84964,-0.39645 1.15408,-0.424936 1.77827,-0.166385 0.82276,0.340795 0.87326,0.449397 0.48443,1.041714 -0.17531,0.267055 -0.32557,0.304047 -0.4591,0.113024 -0.78575,-1.124085 -2.64726,0.164889 -3.48964,2.416346 -0.71217,1.90345 -0.72402,5.332086 -0.0383,11.077696 0.84707,7.097233 1.08251,10.855707 1.08114,17.258514 -0.001,6.703085 -0.44587,10.426115 -1.7578,14.725245 -1.02164,3.34783 -2.19723,7.6924 -2.20115,8.13462 -0.004,0.40025 1.04817,-1.17449 1.57595,-2.35967 0.60087,-1.34935 2.68262,-2.56949 3.72562,-2.18366 0.55091,0.20379 0.53624,0.23318 -0.28641,0.57393 -1.15649,0.47903 -2.34872,1.64538 -3.65171,3.57242 -0.59054,0.87337 -1.38605,1.9412 -1.76779,2.37295 -1.86835,2.11314 -3.49634,7.54355 -3.76394,12.5552 -0.12021,2.25137 -0.0834,2.97051 0.14484,2.82945 0.16831,-0.10402 0.30718,-0.39052 0.3086,-0.63666 0.001,-0.24614 0.29054,-1.06599 0.64247,-1.82188 0.35194,-0.7559 0.82787,-2.10811 1.05762,-3.00492 0.613,-2.39275 1.773,-3.86881 4.53676,-5.77283 1.58429,-1.09146 2.49426,-2.36351 2.49426,-3.48673 0,-0.28619 0.1149,-0.52034 0.25534,-0.52034 0.798,0 1.08159,2.66401 0.41982,3.94372 -0.36892,0.71342 -0.72614,1.05713 -3.42043,3.2911 -0.67353,0.55845 -1.22459,1.12415 -1.22459,1.25712 0,0.13296 0.46032,0.24175 1.02294,0.24175 1.1627,0 2.2166,0.69621 2.81988,1.86283 0.52218,1.00979 0.49708,3.03792 -0.049,3.96241 -0.70837,1.19917 -2.50597,1.77019 -2.83918,0.90188 -0.25791,-0.67212 -0.20775,-0.70774 0.74497,-0.52901 0.74991,0.14068 0.97743,0.0674 1.32329,-0.42642 0.49272,-0.70346 0.53609,-2.29183 0.0784,-2.8726 -0.61211,-0.77676 -1.63403,-1.31114 -2.50735,-1.31114 -1.09975,0 -3.29441,1.09283 -3.82036,1.90235 -1.00655,1.54922 -1.40529,3.46406 -1.395,6.69901 0.01,3.0209 0.0895,3.54086 1.20938,7.87356 0.14109,0.54586 0.34388,0.99247 0.45063,0.99247 0.10676,0 0.34007,-0.76949 0.51848,-1.70996 0.31764,-1.67445 1.05456,-3.58319 1.38339,-3.58319 0.0912,0 0.39845,-0.2168 0.68287,-0.48178 1.20923,-1.12657 3.12601,-1.21535 4.65204,-0.21545 1.84569,1.20934 1.62216,4.44857 -0.33142,4.80282 -1.14558,0.20773 -2.3655,-1.32353 -1.32954,-1.66885 0.18248,-0.0608 0.39734,0.14015 0.47748,0.44661 0.1793,0.68562 0.65419,0.7138 1.23392,0.0732 0.63428,-0.70087 0.53832,-1.73809 -0.24717,-2.67159 -0.60388,-0.71767 -0.84722,-0.81358 -2.05109,-0.80839 -1.97521,0.009 -2.93778,0.93004 -3.74254,3.58297 -0.59311,1.95525 -0.50017,4.55955 0.26721,7.48696 0.36822,1.40472 0.72847,2.72036 0.80054,2.92363 0.0776,0.21883 0.40975,-0.18969 0.81427,-1.00144 0.72619,-1.45727 2.06988,-2.41171 3.39528,-2.41171 0.79444,0 0.89383,0.4233 0.15449,0.65795 -0.28473,0.0904 -0.81238,0.51453 -1.17255,0.94258 -0.68672,0.81611 -1.06799,2.28959 -1.93657,7.48418 -0.2635,1.57589 -0.56758,2.77678 -0.67573,2.66863 z m 1.33537,-8.90828 c 0.17009,-0.40029 0.25532,-0.7278 0.1894,-0.7278 -0.14607,0 -0.92743,1.48285 -0.92743,1.76006 0,0.31959 0.40331,-0.24451 0.73803,-1.03226 z m -2.6349,-25.07628 c 0.3199,0 1.36756,-0.94339 1.36756,-1.23145 0,-0.28796 -0.7769,-0.0148 -1.27338,0.44779 -0.51142,0.47645 -0.57922,0.48678 -0.57922,0.0882 0,-0.61663 -0.15253,-0.3897 -0.37849,0.56311 -0.15187,0.64044 -0.12325,0.73 0.14803,0.46315 0.18498,-0.18195 0.50695,-0.33082 0.7155,-0.33082 z m 4.27879,-0.20664 c 0,-0.3275 -1.5662,-0.83663 -1.73475,-0.56391 -0.082,0.13268 0.0891,0.24123 0.38022,0.24123 0.29113,0 0.60292,0.1191 0.69289,0.26466 0.19355,0.31318 0.66164,0.35423 0.66164,0.058 z m -4.23452,-1.38131 c 0.21834,-0.1411 0.30514,-0.25837 0.19288,-0.2606 -0.33324,-0.007 2.25344,-2.50812 3.11941,-3.01669 0.79095,-0.46451 1.98086,-2.0045 1.98086,-2.56365 0,-0.15981 -0.45353,0.19581 -1.00785,0.79026 -0.55432,0.59445 -1.11003,1.08082 -1.23492,1.08082 -0.52198,0 -3.4602,2.95501 -3.64646,3.66729 -0.16211,0.6199 -0.0125,0.69585 0.59608,0.30257 z m -2.38192,-17.88177 c 0,-0.42487 -0.59688,-1.17356 -0.93561,-1.17356 -0.50526,0 -0.49326,0.38592 0.0282,0.9074 0.41092,0.41092 0.90739,0.55655 0.90739,0.26616 z m 1.87088,-7.17873 c -0.4139,-1.49051 -0.34644,-2.97833 0.2581,-5.692371 0.54557,-2.449257 0.60994,-5.248459 0.12061,-5.244442 -0.14556,0.0012 -0.28381,0.56827 -0.30721,1.260167 -0.0406,1.201444 -0.25441,2.368762 -0.86041,4.698539 -0.49476,1.902077 -0.3583,4.646137 0.28294,5.690137 0.66241,1.07844 0.90742,0.73365 0.50597,-0.71203 z m 2.79453,-36.261999 c -0.0721,-0.07206 -0.25803,-0.05251 -0.41328,0.04344 -0.31967,0.197567 -0.3672,1.534334 -0.0898,2.525127 0.14963,0.534395 0.22842,0.363621 0.40966,-0.887957 0.12342,-0.85228 0.16545,-1.608555 0.0934,-1.68061 z m -28.84314,1.708431 c 1.88965,-2.021845 2.07121,-2.485513 2.09758,-5.356828 0.0134,-1.456982 0.1167,-2.857475 0.2296,-3.112208 0.40961,-0.924157 -0.37592,-0.451438 -0.87958,0.529315 -0.28032,0.545855 -1.17595,1.661692 -1.99031,2.479637 -1.30975,1.315536 -1.48063,1.611013 -1.48063,2.560219 0,1.482795 0.55709,3.760001 0.91983,3.760001 0.16479,0 0.66137,-0.387061 1.10351,-0.860136 z m 6.86166,-0.476986 c -1.21991,-1.350298 -1.38536,-1.798039 -1.69047,-4.574647 -0.3883,-3.533735 -1.90196,-5.39659 -2.50767,-3.086177 -0.36138,1.378429 -0.0927,4.740108 0.46535,5.822058 0.26277,0.509465 0.95772,1.37291 1.54434,1.918766 0.85902,0.799327 1.27002,0.992465 2.11197,0.992465 h 1.04539 z m 15.54199,-3.267113 c -0.26152,-0.348907 -0.5575,-0.584593 -0.65773,-0.523749 -0.10022,0.06085 -0.30026,-0.100296 -0.44453,-0.35809 -0.14427,-0.257794 -0.32776,-0.444544 -0.40775,-0.414999 -0.08,0.02954 -0.71362,-0.200173 -1.40807,-0.510484 -1.46115,-0.652914 -4.59244,-0.818042 -5.1397,-0.271041 -0.26481,0.264683 -0.12198,0.330143 0.71442,0.327429 1.32046,-0.0043 4.88293,0.817241 4.88293,1.126032 0,0.127537 0.11909,0.15828 0.26465,0.06832 0.14557,-0.08996 0.26466,-0.03041 0.26466,0.132329 0,0.162743 0.1191,0.222291 0.26466,0.132329 0.14556,-0.08996 0.26466,-0.03041 0.26466,0.132328 0,0.162743 0.11909,0.222291 0.26465,0.132329 0.14557,-0.08996 0.26466,-0.04618 0.26466,0.0973 0,0.22736 0.43471,0.431361 1.13715,0.533639 0.11597,0.01689 -0.003,-0.254768 -0.26466,-0.603674 z m -24.74727,-0.926355 c 1.26858,-0.648684 2.21619,-1.539709 3.06139,-2.878587 0.92442,-1.464366 1.15868,-2.441775 0.58525,-2.441775 -0.81575,0 -2.6608,1.109007 -3.98801,2.397076 -1.17747,1.142744 -2.955095,2.188561 -3.505444,2.062329 -1.8159,-0.416508 -1.876053,-0.418234 -1.734664,-0.04978 0.249735,0.650798 2.00492,1.388896 3.331888,1.40114 0.74445,0.0069 1.67294,-0.195538 2.24959,-0.490403 z`;
    }

    createFloralOrnaments(viewWidth, viewHeight) {
        // Create SVG element - only cover upper 65% of viewport (above water)
        const svgHeight = viewHeight * 0.65;
        this.svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        this.svg.setAttribute('class', 'floral-svg');
        this.svg.setAttribute('viewBox', `0 0 ${viewWidth} ${svgHeight}`);
        this.svg.style.cssText = `
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        `;

        const color = this.themeHandler.getFloralColor();

        // Create left ornament using traced path
        this.createTracedOrnament(viewWidth, viewHeight, 'left', color);

        // Create right ornament (mirrored)
        this.createTracedOrnament(viewWidth, viewHeight, 'right', color);

        // Add CSS for animations
        this.addAnimationStyles();

        return this.svg;
    }

    createTracedOrnament(viewWidth, viewHeight, side, color) {
        const isLeft = side === 'left';
        const isMobile = viewWidth < 600;

        const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        group.setAttribute('class', `ornament-group ornament-${side}`);

        // Path bounds: x: 100-135, y: 40-165 (height ~125 units, width ~35 units)
        // The ornament grows from root (x=132) toward flowers (x=100), spanning ~32 units horizontally
        const pathHeight = 125;
        const pathWidth = 32; // horizontal reach of the ornament

        let scale, rootY, tiltAngle;

        if (isMobile) {
            // Mobile: small ornaments that frame the "Sarefo" h1
            // Scale so the horizontal reach fits beside the header text
            const targetReach = (viewWidth / 2) - 60;
            scale = Math.max(1.8, Math.min(2.8, targetReach / pathWidth));

            // Position so flower tops start just below language switcher (~50px from top)
            // The path has flowers at y=40 and root at y=165
            // After transform, the flower top will be at: rootY - (165-40)*scale = rootY - 125*scale
            // We want flower top at ~50px, so: rootY = 50 + 125*scale
            const flowerTopY = 50; // just below language switcher
            rootY = flowerTopY + (pathHeight * scale);
            // Tilt scales from 0 at 460px to 8 at 600px
            tiltAngle = Math.max(0, ((viewWidth - 460) / 140) * 8);
        } else {
            // Desktop: scale based on height to reach water level
            const waterLevel = viewHeight * 0.62;
            const targetHeight = waterLevel * 0.85;
            scale = targetHeight / pathHeight;

            // Position flower tops just below language switcher (~50px from top)
            const flowerTopY = 50;
            rootY = flowerTopY + (pathHeight * scale);
            tiltAngle = 8;
        }

        let transform;

        if (isLeft) {
            // Left side: root at left edge, flip so ornament extends right toward center
            // Positive rotation because the flip will mirror it
            transform = `translate(0, ${rootY}) rotate(${tiltAngle}) scale(${-scale}, ${scale}) translate(-132, -165)`;
        } else {
            // Right side: root at right edge, ornament extends left toward center
            transform = `translate(${viewWidth}, ${rootY}) rotate(${-tiltAngle}) scale(${scale}, ${scale}) translate(-132, -165)`;
        }

        group.setAttribute('transform', transform);

        // Create the ornament path
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('d', this.getTracedPath());
        path.setAttribute('fill', color);
        path.setAttribute('fill-opacity', '0.85');
        path.setAttribute('class', 'traced-ornament');

        group.appendChild(path);
        this.svg.appendChild(group);
        this.paths.push(path);
    }

    addAnimationStyles() {
        if (document.getElementById('floral-animation-styles')) return;

        const style = document.createElement('style');
        style.id = 'floral-animation-styles';
        style.textContent = `
            .traced-ornament {
                opacity: 0;
                animation: fadeIn 0.8s ease-out 0.2s forwards;
            }

            @keyframes fadeIn {
                to {
                    opacity: 1;
                }
            }

            .ornament-group {
                transition: fill 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    }

    updateTheme() {
        const newColor = this.themeHandler.getFloralColor();
        this.paths.forEach(path => {
            path.setAttribute('fill', newColor);
        });
    }

    // Called by nature-scene-manager
    animate(deltaTime) {
        // CSS-based animations, no per-frame updates needed
    }
}
